{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pepsico.com/schemas/maui-shell/check-in-request.json",
  "title": "Check-In Request",
  "description": "Deep link payload schema for invoking the MAUI shell app via mauiapp://check-in. This schema defines the query parameters that can be passed from an external app (e.g., React Native orchestrator) to the MAUI check-in screen.",
  "type": "object",
  "properties": {
    "userId": {
      "type": "string",
      "description": "Unique identifier for the user performing the check-in. Optional but recommended for tracking.",
      "examples": ["ABC123", "user-456", "driver_789"],
      "maxLength": 100
    },
    "location": {
      "type": "string",
      "description": "Name or identifier of the check-in location (e.g., store name, warehouse ID).",
      "examples": ["Warehouse B", "Store 5", "DC-Northeast"],
      "maxLength": 200
    },
    "event": {
      "type": "string",
      "description": "Type of event or activity associated with the check-in (e.g., delivery, pickup, meeting).",
      "examples": ["Delivery", "Pickup", "Inspection", "Meeting"],
      "maxLength": 100
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp indicating when the check-in was initiated by the calling app. Optional; MAUI app will record its own receivedTimestamp.",
      "examples": ["2026-01-26T14:30:00Z"]
    },
    "requestId": {
      "type": "string",
      "description": "Unique identifier for this check-in request, generated by the orchestrator. Used for correlation when the MAUI app returns a response.",
      "examples": ["req-12345", "chk-abc-xyz"],
      "maxLength": 50
    },
    "returnUrl": {
      "type": "string",
      "format": "uri",
      "description": "Deep link URL for the MAUI app to invoke when returning control to the orchestrator. If not provided, a default orchestrator URL will be used (e.g., reactnativeapp://handoff-complete).",
      "examples": ["reactnativeapp://handoff-complete", "orchestrator://task-complete"],
      "maxLength": 200
    }
  },
  "additionalProperties": {
    "type": "string",
    "description": "Custom fields can be passed as additional query parameters. The MAUI app will display them in the CustomFields section of the check-in screen.",
    "maxLength": 500
  },
  "examples": [
    {
      "userId": "driver_001",
      "location": "Warehouse B",
      "event": "Delivery",
      "timestamp": "2026-01-26T14:30:00Z",
      "requestId": "req-12345",
      "returnUrl": "reactnativeapp://handoff-complete"
    },
    {
      "userId": "ABC123",
      "location": "Store 5",
      "customData": "Special instructions here",
      "returnUrl": "orchestrator://task-done"
    },
    {
      "event": "Pickup"
    }
  ],
  "notes": [
    "All properties are OPTIONAL. The MAUI app MUST handle cases where no parameters are provided (empty deep link: mauiapp://check-in).",
    "Parameter values MUST be URL-encoded when constructing the deep link (e.g., spaces as %20).",
    "Maximum URL length is typically 2000 characters on iOS. Calling apps should avoid excessively long values.",
    "The 'returnUrl' parameter enables the orchestrator to specify its callback URL. If omitted, MAUI app uses a default or shows local confirmation (standalone mode).",
    "This schema represents the logical structure. In practice, these fields are passed as URL query parameters, not as JSON.",
    "Example deep link: mauiapp://check-in?userId=ABC123&location=Warehouse%20B&event=Delivery&returnUrl=reactnativeapp://handoff-complete"
  ]
}
